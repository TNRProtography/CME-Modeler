<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#171717">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>TNR Protography CME Modeler</title>
    
    <!-- Leaflet & Marker Cluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <!-- Non-Leaflet CDN scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #171717; color: #d4d4d4; overflow: hidden; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #262626; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #525252; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #737373; }
        
        /* --- Leaflet Dark Theme & Icon Fixes --- */
        .leaflet-container { background-color: #1a1a1a !important; }
        .leaflet-popup-content-wrapper, .leaflet-popup-tip {
            background: #262626;
            color: #d4d4d4;
            box-shadow: 0 3px 14px rgba(0,0,0,0.4);
        }
        /* Fix for emoji markers: remove default icon background and border */
        .emoji-marker {
            background-color: transparent !important;
            border: none !important;
        }
        .emoji-marker div {
             width: 32px;
             height: 32px;
             line-height: 32px;
             text-align: center;
             font-size: 28px;
             text-shadow: 0 0 5px black;
        }
        /* Custom styles for marker clusters on dark theme */
        .marker-cluster-small, .marker-cluster-medium, .marker-cluster-large {
            background-color: rgba(30, 30, 30, 0.7);
            border: 2px solid rgba(110, 110, 110, 0.8);
        }
        .marker-cluster-small div, .marker-cluster-medium div, .marker-cluster-large div {
            background-color: rgba(18, 18, 18, 0.8);
            color: #f5f5f5;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react": "https://esm.sh/react@^19.1.0",
    "react/": "https://esm.sh/react@^19.1.0/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>